<!DOCTYPE html>
<html>
<head>
<title>Video Test 2</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
<script src="js/jquery-1.9.1.js"></script>
<script src="js/jquery-ui.js"></script>
<link rel=stylesheet href="css/jquery-ui.css" />
</head>
<body>
<div draggable="true "id="container">
<!-- big videos -->
  <span>
    <video class="vids" autoplay loop id="reel" style="z-index:999;top:0px; width:360px; height:203px;">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reel2" style="top:0px; width:360px; height:203px;">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reel3" style="top:0px; width:360px; height:203px;">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reel4" style="top:0px; width:360px; height:203px;">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
  </span>
<!--small videos -->
  <span>
    <video class="vids" data-rightpos="3600" autoplay loop id="reelsmall" style="top:1px; width:180px; height:100px; ;">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall2" style="top:103px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall3" style="top:1px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall4" style="top:103px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall5" style="top:1px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall6" style="top:103px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall7" style="top:1px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
    <video class="vids" autoplay loop id="reelsmall8" style="top:103px; width:180px; height:100px; ">
      <source src="vid/reel.mp4" type="video/webm" />
      Your browser does not support the video tag.
    </video>
  </span>
</div>
<div id="downlog"></div>
<div id="uplog"></div>
<div id="movelog"></div>
<div id="demo3"></div>
<script>

// mouse variables
var mouseDownX;
var mouseDownY;
var mouseUpX;
var mouseUpY;
var mouseMoveX;
var mouseMoveY;
var drag;
var clicking = false;
var flag = 0;
//detect if it's a mouse click or a mouse drag
document.addEventListener("mousedown", function() {
  flag = 0;
}, false);
document.addEventListener("mousemove", function() {
  flag = 1;
}, false);
document.addEventListener("mouseup", function() {
  if (flag === 0){
    console.log("click");
    $("body").mousedown(function down(e) {
        handleMouseDown(e);
    });
  }
  else if(flag === 1){
    console.log("this was a drag");
  }
}, false);

function handleMouseDown(e) {
    clicking = true;
    mouseDownX = parseInt(e.clientX);
    mouseDownY = parseInt(e.clientY);
    console.log( "Mouse Down:");
    console.log( mouseDownX, mouseDownY);
}

function handleMouseUp(e) {
    clicking = false;
    mouseUpX = parseInt(e.clientX);
    mouseUpY = parseInt(e.clientY);
    console.log( "Mouse Up:");
    console.log(mouseUpX, mouseUpY);
}
$("body").mousedown(function down(e) {
    handleMouseDown(e);
});
$("body").mouseup(function up(e) {
    handleMouseUp(e);
});

function handleMouseMove(e) {
  if(clicking == false) return;
  else {
    mouseMoveX = parseInt(e.clientX);
    mouseMoveY = parseInt(e.clientY);
    console.log("mousemoveX: " + mouseMoveX);
//need to add mousemoveX everytime we drag
    drag = Math.floor(Math.sqrt( (mouseDownX - mouseMoveX)*(mouseDownX-mouseMoveX)+(mouseDownY-mouseMoveY)*(mouseDownY-mouseMoveY) ));
    drag *= mouseMoveX > mouseDownX ? 1 : -1;
    console.log(drag);
  }
}

$("body").mousemove(function (e) {
    handleMouseMove(e);
});

// raf polyfill
window.requestAnimFrame = (function(){
return  window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
     function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element){
       window.setTimeout(callback, 1000 / 60);
     };
})();
//get all videos from the Class array
var videos = document.getElementsByClassName("vids");
var speed = 10;

//animating actions
var startTime = undefined;
function render(time) {
  console.log("drag: " + drag);

    if (time === undefined)
    time = Date.now();
    if (startTime === undefined)
    startTime = time;
    //LINE 1
    //big videos
    reel.style.right = ((time - startTime - (drag * 4) )/speed % 2880) + "px";
    reel2.style.right = (((time - startTime - 5400 - (drag * 4)  )/speed % 2880) + "px");
    reel3.style.right = (((time - startTime - 14400 - (drag * 4) )/speed % 2880) + "px");
    reel4.style.right = (((time - startTime - 18000 - (drag * 4) )/speed % 2880) + "px");
    //small videos
    reelsmall.style.right = (((time - startTime - 3600 - (drag * 4) )/speed % 2880) + "px");
    reelsmall2.style.right = (((time - startTime - 3600 - (drag * 4) )/speed % 2880) + "px");
    reelsmall3.style.right = (((time - startTime - 9000 - (drag * 4) )/speed % 2880) + "px");
    reelsmall4.style.right = (((time - startTime - 9000 - (drag * 4) )/speed % 2880) + "px");
    reelsmall5.style.right = (((time - startTime - 10800 - (drag * 4) )/speed % 2880) + "px");
    reelsmall6.style.right = (((time - startTime - 10800 - (drag * 4) )/speed % 2880) + "px");
    reelsmall7.style.right = (((time - startTime - 12600 - (drag * 4) )/speed % 2880) + "px");
    reelsmall8.style.right = (((time - startTime - 12600 - (drag * 4) )/speed % 2880) + "px");
}

document.ready  = function() {
    (function animloop(){
       render();
       requestAnimFrame(animloop, videos);
    })();
};
     </script>
</body>
</html>
